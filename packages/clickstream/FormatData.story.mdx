import { Meta, Story, ArgsTable, Canvas, Source } from '@storybook/addon-docs'
import { ClickStreamProvider } from '@v-uik/clickstream'
import {
  createTitle,
  COMPONENTS,
  DocsAlert,
  STORY_TITLES,
} from '../../docs/showroom/config'
import { FormatData } from './examples'

import RawFormatData from '!!raw-loader!./examples/FormatData'

<Meta
  title={createTitle([
    COMPONENTS.utility,
    'ClickStreamProvider',
    STORY_TITLES.clickStreamProvider.formatData,
  ])}
  component={ClickStreamProvider}
  parameters={{
    viewMode: 'docs',
    previewTabs: {
      canvas: { hidden: true },
    },
  }}
/>

# Преобразование данных

По умолчанию `ClickStreamProvider` возвращает данные о событии в виде объекта типа `ClickStreamEventData`.

Чтобы поменять тип возвращаемых данных, необходимо передать в свойство `formatEventData` соответствующую функцию обратного вызова.
Данная фукнция в качестве аргументов принимает объект инициированного события `event` и тип события `eventType`, которое по умолчанию принимает
значение события `event.type`. Также может принимать любое пользовательское значение.

Ниже представлен пример реализации пользовательского преобразования данных о событии с помощью функции обратного вызова `formatEventData`.

<DocsAlert justify="start">
  Результат манипуляций с элементами формы или со всей страницей отобразится в
  панели с кодом снизу под формой
</DocsAlert>

<Canvas withSource="none">
  <FormatData />
</Canvas>

<Source language="tsx" code={RawFormatData} />
